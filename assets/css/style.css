/*
  Site base styles — modern, minimal, and elegant
  - Design tokens (CSS variables)
  - Base elements and typography
  - Layout primitives
  - Components (nav, buttons, cards, forms, tables)
  - Accessibility and motion preferences
*/

/* ------------------------------ */
/* Design tokens                  */
/* ------------------------------ */

/**
 * :root is a pseudo-class selector in CSS that targets the root element of the document (<html>).
 * 
 */

:root {
	/* Fonts */
	--font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, 'Helvetica Neue', Arial, 'Noto Sans',
		sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
	--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

	/* Colors (light palette) */
	--color-background: #f9fafb;
	--color-foreground: #1e293b;
	--color-card: #ffffff;
	--color-card-foreground: #1e293b;
	--color-popover: #f1f5f9;
	--color-popover-foreground: #1e293b;
	--color-primary: #009ee0; /* Cyan */
	--color-primary-foreground: #000000;
	--color-secondary: #ffed00; /* Yellow */
	--color-secondary-foreground: #000000;
	--color-accent: #e2007a; /* Magenta */
	--color-accent-foreground: #ffffff;
	--color-muted: #334155;
	--color-muted-foreground: #f1f5f9;
	--color-border: #e5e7eb;
	--color-input: #e5e7eb;
	--color-ring: #1de285;
	--color-destructive: #ff611f;
	--color-destructive-foreground: #ffffff;
	--color-muted-foreground-rgb: 51, 65, 85;

	/* Spacing scale */
	/* Fluid spacing: small = static, larger = fluid */
	--space-1: 0.25rem;
	--space-2: 0.5rem;
	--space-3: 0.75rem;
	--space-4: clamp(0.875rem, 0.6vw + 0.5rem, 1.25rem);
	--space-5: clamp(1rem, 0.8vw + 0.6rem, 1.5rem);
	--space-6: clamp(1.25rem, 1vw + 0.75rem, 2rem);
	--space-8: clamp(1.75rem, 1.5vw + 1rem, 3rem);
	--space-10: clamp(2rem, 2vw + 1rem, 3.5rem);
	--space-12: clamp(2.25rem, 2.5vw + 1.25rem, 4rem);
	--space-16: clamp(3rem, 3vw + 1.5rem, 5rem);

	/* Radii and shadows */
	--radius-s: 8px;
	--radius-m: 14px;
	--radius-l: 22px;

	--shadow-s: 0 1px 2px rgba(15, 23, 42, 0.06);
	--shadow-m: 0 8px 24px rgba(15, 23, 42, 0.08);

	/* Sizes */
	--container: clamp(56rem, 8vw + 56rem, 84rem); /* Fluid — min 896px, preferred grows with viewport, max 1344px */
	/* 
	  --content: 65ch;

	  The 'ch' unit in CSS stands for the width of the "0" (zero) character in the element's font.
	  Setting --content: 65ch means the content width will be roughly the width of 65 "0" characters,
	  which is useful for managing optimal line lengths in typographic layouts, 
	  making text blocks more readable.
	*/
	--content: 65ch;

	/* Motion */
	--ease-out: cubic-bezier(0.16, 1, 0.3, 1);
	--fast: 150ms;
	--normal: 250ms;

	/* ===== RESPONSIVE TYPOGRAPHY ===== */
	--text-2xs: clamp(0.25rem, 0.3vw + 0.15em, 0.5rem);
	--text-xs: clamp(0.375rem, 0.4vw + 0.2em, 0.625rem);
	--text-sm: clamp(0.5rem, 0.5vw + 0.25em, 0.75rem);
	--text-base: clamp(0.625rem, 0.6vw + 0.3em, 0.875rem);
	--text-lg: clamp(0.75rem, 0.8vw + 0.4em, 1rem);
	--text-xl: clamp(0.875rem, 1vw + 0.5em, 1.2rem);
	--text-2xl: clamp(1rem, 1.5vw + 0.8em, 1.5rem);
	--text-3xl: clamp(1.125rem, 2vw + 1em, 2rem);

	/* ===== LINE HEIGHTS ===== */
	--line-height-2xs: clamp(0.5rem, 0.3vw + 0.5em, 0.625rem);
	--line-height-xs: clamp(0.625rem, 0.4vw + 0.6em, 0.75rem);
	--line-height-sm: clamp(0.75rem, 0.5vw + 0.75em, 0.875rem);
	--line-height-base: clamp(0.875rem, 0.6vw + 0.85em, 1rem);
	--line-height-lg: clamp(1rem, 0.8vw + 1em, 1.2rem);
	--line-height-xl: clamp(1.1rem, 1vw + 1.1em, 1.3rem);
	--line-height-2xl: clamp(1.2rem, 1.2vw + 1.3em, 1.5rem);
	--line-height-3xl: clamp(1.3rem, 1.5vw + 1.4em, 1.7rem);
}

/**
 * The following CSS uses a media query to apply styles for users who have set their OS or browser to dark mode.
 * 
 * @media (prefers-color-scheme: dark) runs only when dark mode is preferred.
 * Within this block, styles are set on both :root and :root.dark selectors.
 * 
 * - :root targets the highest level element for default variables.
 * - :root.dark allows an explicit .dark class, supporting a manual theme toggle alongside system preference.
 */

@media (prefers-color-scheme: dark) {
	:root:not(:has(#theme-light:checked)):not(:has(#theme-dark:checked)),
	:root.dark:not(:has(#theme-light:checked)):not(:has(#theme-dark:checked)) {
		--color-background: #0f172a;
		--color-foreground: #f8fafc;
		--color-card: #1e293b;
		--color-card-foreground: #f8fafc;
		--color-popover: #1e293b;
		--color-popover-foreground: #f8fafc;
		--color-primary: #e2007a; /* Complementary to Cyan */
		--color-primary-foreground: #ffffff;
		--color-secondary: #009ee0; /* Complementary to Yellow */
		--color-secondary-foreground: #ffffff;
		--color-accent: #ffed00; /* Complementary to Magenta */
		--color-accent-foreground: #000000;
		--color-muted: #94a3b8;
		--color-muted-foreground: #f1f5f9;
		--color-destructive: #ff611f;
		--color-destructive-foreground: #0f172a;
		--color-border: #334155;
		--color-input: #334155;
		--color-ring: #1de285;
		--color-muted-foreground-rgb: 148, 163, 184;
		--shadow-s: 0 1px 2px rgba(0, 0, 0, 0.4);
		--shadow-m: 0 8px 24px rgba(0, 0, 0, 0.35);
	}
}

/* CSS-only theme toggle  
   - Explicit :root:has(#theme-light:checked) and :root:has(#theme-dark:checked) take precedence. 
   - No duplication: Only one place for each color set. */

:root:has(#theme-light:checked) {
	color-scheme: light;
	--color-background: #f9fafb;
	--color-foreground: #1e293b;
	--color-card: #ffffff;
	--color-card-foreground: #1e293b;
	--color-popover: #f1f5f9;
	--color-popover-foreground: #1e293b;
	--color-primary: #009ee0;
	--color-primary-foreground: #000000;
	--color-secondary: #ffed00;
	--color-secondary-foreground: #000000;
	--color-accent: #e2007a;
	--color-accent-foreground: #ffffff;
	--color-muted: #334155;
	--color-muted-foreground: #f1f5f9;
	--color-border: #e5e7eb;
	--color-input: #e5e7eb;
	--color-ring: #1de285;
	--color-destructive: #ff611f;
	--color-destructive-foreground: #ffffff;
	--color-muted-foreground-rgb: 51, 65, 85;
}

:root:has(#theme-dark:checked) {
	color-scheme: dark;
	--color-background: #0f172a;
	--color-foreground: #f8fafc;
	--color-card: #1e293b;
	--color-card-foreground: #f8fafc;
	--color-popover: #1e293b;
	--color-popover-foreground: #f8fafc;
	--color-primary: #e2007a;
	--color-primary-foreground: #ffffff;
	--color-secondary: #009ee0;
	--color-secondary-foreground: #ffffff;
	--color-accent: #ffed00;
	--color-accent-foreground: #000000;
	--color-muted: #94a3b8;
	--color-muted-foreground: #f1f5f9;
	--color-destructive: #ff611f;
	--color-destructive-foreground: #0f172a;
	--color-border: #334155;
	--color-input: #334155;
	--color-ring: #1de285;
	--color-muted-foreground-rgb: 148, 163, 184;
}

/* ------------------------------ */
/* Base & typography              */
/* ------------------------------ */
html {
	box-sizing: border-box;
	color-scheme: light dark;
	hanging-punctuation: first last;
}

*,
*::before,
*::after {
	box-sizing: inherit;
}

body {
	margin: 0;
	min-height: 100svh;
	display: grid;
	grid-template-rows: auto 1fr auto;
	background-color: var(--color-background);
	color: var(--color-foreground);
	font-family: var(--font-sans);
	font-size: var(--text-base);
	line-height: var(--line-height-base);
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeLegibility;
}

/* Keep the distinctive title font for h1 */
h1 {
	font-family: 'OCR-A', monospace;
}

/* Headings */
h1 {
	font-weight: 800;
	line-height: var(--line-height-3xl);
	letter-spacing: -0.02em;
	font-size: var(--text-3xl);
	margin: 0 0 var(--space-4);
}

h2 {
	font-weight: 700;
	line-height: var(--line-height-2xl);
	letter-spacing: -0.01em;
	font-size: var(--text-2xl);
	margin: var(--space-8) 0 var(--space-3);
}

h3 {
	font-weight: 700;
	line-height: var(--line-height-xl);
	font-size: var(--text-xl);
	margin: var(--space-6) 0 var(--space-2);
}

p {
	max-width: var(--content);
	margin: 0 0 var(--space-4);
	font-size: var(--text-base);
	line-height: var(--line-height-base);
}

small {
	color: var(--color-muted);
	font-size: var(--text-sm);
	line-height: var(--line-height-sm);
}

a {
	color: var(--color-primary);
	text-decoration: none;
	text-underline-offset: 2px;
	transition: color var(--fast) var(--ease-out), text-decoration-color var(--fast) var(--ease-out);
}

a:hover {
	text-decoration: underline;
}

a:focus-visible {
	outline: 3px solid var(--color-ring);
	outline-offset: 2px;
	border-radius: 6px;
}

code,
kbd,
samp,
pre {
	font-family: var(--font-mono);
}

pre {
	background: var(--color-card);
	border: 1px solid var(--color-border);
	border-radius: var(--radius-s);
	padding: var(--space-4);
	overflow-x: auto;
	box-shadow: var(--shadow-s);
}

blockquote {
	margin: var(--space-6) 0;
	padding: var(--space-3) var(--space-4);
	border-left: 4px solid var(--color-primary);
	background: color-mix(in srgb, var(--color-primary) 6%, var(--color-popover));
	border-radius: 0 var(--radius-s) var(--radius-s) 0;
}

hr {
	border: none;
	border-top: 1px solid var(--color-border);
	margin: var(--space-8) 0;
}

img,
svg,
video {
	max-width: 100%;
	height: auto;
}

/* ------------------------------ */
/* Layout                         */
/* ------------------------------ */
header,
main,
footer {
	width: min(100% - var(--space-8), var(--container));
	margin-inline: auto;
}

header {
	padding-block: var(--space-4);
	border-bottom: 1px solid var(--color-border);
	background-color: color-mix(in srgb, var(--color-background) 88%, transparent);
	backdrop-filter: saturate(180%) blur(6px);
}

footer {
	padding-block: var(--space-6);
	border-top: 1px solid var(--color-border);
	color: var(--color-muted);
	font-size: var(--text-sm);
	line-height: var(--line-height-sm);
}

main {
	padding-block: var(--space-10);
}

section + section {
	margin-top: var(--space-12);
}

/* Flow utility for vertical rhythm */
.flow > * + * {
	margin-top: var(--space-4);
}

/* Simple container utility */
.container {
	width: min(100% - var(--space-8), var(--container));
	margin-inline: auto;
}

/* Center utility */
.center {
	display: grid;
	place-items: center;
}

/* Cluster (row with gap and wrap) */
.cluster {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: var(--space-4);
}

/* Grid utility */
.grid {
	display: grid;
	gap: var(--space-6);
}

@media (min-width: 48rem) {
	.grid.cols-2 {
		grid-template-columns: repeat(2, 1fr);
	}
	.grid.cols-3 {
		grid-template-columns: repeat(3, 1fr);
	}
}

/* ------------------------------ */
/* Navigation                     */
/* ------------------------------ */
header h1 {
	margin: 0 0 var(--space-2);
}

header nav ul {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	gap: var(--space-3);
}

header nav a {
	color: inherit;
	text-decoration: none;
	padding: 0.5rem 0.75rem;
	border-radius: 10px;
	transition: background-color var(--fast) var(--ease-out), color var(--fast) var(--ease-out);
}

header nav a:hover {
	background: color-mix(in srgb, var(--color-foreground) 8%, transparent);
}

header nav a:focus-visible {
	outline: 3px solid var(--color-ring);
	outline-offset: 2px;
}

/* Theme toggle styling (no-JS radios) */
form[aria-label='Theme'] label {
	border-color: var(--color-border);
	background: color-mix(in srgb, var(--color-foreground) 3%, transparent);
	color: var(--color-foreground);
}

/* Highlight active label by pairing :has() with :checked */
:root:has(#theme-auto:checked) label[for='theme-auto'],
:root:has(#theme-light:checked) label[for='theme-light'],
:root:has(#theme-dark:checked) label[for='theme-dark'] {
	background: color-mix(in srgb, var(--color-primary) 16%, transparent);
	border-color: color-mix(in srgb, var(--color-primary) 40%, var(--color-border));
}

/* ------------------------------ */
/* Buttons                        */
/* ------------------------------ */
.btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 0.5ch;
	height: 2.5rem;
	padding: 0 1rem;
	border-radius: 12px;
	border: 1px solid transparent;
	background: var(--color-primary);
	color: var(--color-primary-foreground);
	font-weight: 600;
	text-decoration: none;
	cursor: pointer;
	transition: transform var(--fast) var(--ease-out), box-shadow var(--fast) var(--ease-out),
		background-color var(--fast) var(--ease-out), color var(--fast) var(--ease-out);
	box-shadow: 0 1px 0 rgba(0, 0, 0, 0.04), var(--shadow-s);
}

.btn:hover {
	transform: translateY(-1px);
}
.btn:active {
	transform: translateY(0);
}
.btn:focus-visible {
	outline: 3px solid var(--color-ring);
	outline-offset: 2px;
}

.btn--ghost {
	background: transparent;
	color: var(--color-foreground);
	border-color: var(--color-border);
}

.btn--soft {
	background: color-mix(in srgb, var(--color-primary) 12%, var(--color-card));
	color: var(--color-primary);
	border-color: color-mix(in srgb, var(--color-primary) 30%, var(--color-border));
}

/* ------------------------------ */
/* Cards                          */
/* ------------------------------ */
.card {
	background: var(--color-card);
	border: 1px solid var(--color-border);
	border-radius: var(--radius-m);
	padding: var(--space-6);
	box-shadow: var(--shadow-m);
}

.card h3 {
	margin-top: 0;
}

/* ------------------------------ */
/* Lists                          */
/* ------------------------------ */
ul,
ol {
	padding-left: 1.25rem;
}
li {
	margin: 0.25rem 0;
}

/* Nav list override already handled under Navigation */

/* ------------------------------ */
/* Forms                          */
/* ------------------------------ */
input[type='text'],
input[type='email'],
input[type='url'],
input[type='search'],
input[type='password'],
select,
textarea {
	width: 100%;
	max-width: 100%;
	height: 2.75rem;
	padding: 0.625rem 0.875rem;
	border: 1px solid var(--color-input);
	border-radius: 12px;
	background: var(--color-background);
	color: var(--color-foreground);
	outline: none;
	transition: border-color var(--fast) var(--ease-out), box-shadow var(--fast) var(--ease-out);
}

textarea {
	min-height: 8rem;
	height: auto;
	resize: vertical;
}

input:focus-visible,
select:focus-visible,
textarea:focus-visible {
	border-color: color-mix(in srgb, var(--color-primary) 40%, var(--color-border));
	box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);
}

label {
	display: inline-block;
	margin-bottom: 0.5rem;
	font-weight: 600;
}

/* ------------------------------ */
/* Tables                         */
/* ------------------------------ */
table {
	width: 100%;
	border-collapse: collapse;
	border: 1px solid var(--color-border);
	border-radius: var(--radius-s);
	overflow: hidden;
}

th,
td {
	padding: 0.75rem 1rem;
	border-bottom: 1px solid var(--color-border);
}

thead th {
	text-align: left;
	background: color-mix(in srgb, var(--color-foreground) 6%, transparent);
}

tbody tr:nth-child(odd) {
	background: color-mix(in srgb, var(--color-foreground) 2.5%, transparent);
}

/* ------------------------------ */
/* Media & figures                */
/* ------------------------------ */
figure {
	margin: 0;
}
figcaption {
	color: var(--color-muted);
	font-size: var(--text-sm);
	line-height: var(--line-height-sm);
	margin-top: 0.5rem;
}

/* ------------------------------ */
/* Accessibility                  */
/* ------------------------------ */
.visually-hidden {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0 0 0 0);
	white-space: nowrap;
	border: 0;
}

/* ------------------------------ */
/* Motion                         */
/* ------------------------------ */
@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.001ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.001ms !important;
		scroll-behavior: auto !important;
	}
}